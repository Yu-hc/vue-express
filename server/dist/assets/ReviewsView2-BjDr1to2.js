import{r as u}from"./reviewsService-B0zCigq7.js";import{_ as y,c as r,g as c,a as t,w as m,v as p,F as g,r as v,t as h,h as C,f as l,n as R}from"./index-Bu-e1NVi.js";import"./api-C3PXPV91.js";const f={name:"ReviewsView2",data(){return{currentIndex:0,sortBy:"date-asc",tags:[],selectedTags:[],reviews:[],allReviews:[],loading:!0,error:null,isLoggedIn:!1,currentUser:null,showReplyForm:!1,showCommentReply:null,showReviewReply:null,showCommentReplyInList:null,replyContent:"",commentContent:"",reviewReplyContent:"",commentReplyContent:"",submittingReply:!1,showReviewForm:!1,submittingReview:!1,newReview:{subject:"",rate:0,content:"",tagsInput:"",tags:[]},hoverRating:0}},computed:{currentReview(){return this.reviews[this.currentIndex]||{}},filteredReviews(){return this.selectedTags.length===0?this.allReviews:this.allReviews.filter(e=>this.selectedTags.some(a=>e.tags&&e.tags.includes(a))).sort((e,a)=>{const w=this.selectedTags.filter(o=>e.tags&&e.tags.includes(o)).length,n=this.selectedTags.filter(o=>a.tags&&a.tags.includes(o)).length;return w!==n?n-w:new Date(a.date)-new Date(e.date)})},isValidReview(){return this.newReview.subject.trim()&&this.newReview.content.trim()&&this.newReview.rate>0}},watch:{filteredReviews:{handler(s){this.reviews=s,this.currentIndex>=s.length&&(this.currentIndex=Math.max(0,s.length-1)),this.sortReviews()},immediate:!0}},methods:{checkLoginStatus(){const s=localStorage.getItem("isLoggedIn"),e=localStorage.getItem("currentUser");if(console.log("Checking login status:"),console.log("- isLoggedIn:",s),console.log("- userData:",e),s==="true"&&e)try{this.currentUser=JSON.parse(e),this.isLoggedIn=!0,console.log("Login status: true, currentUser:",this.currentUser)}catch(a){console.error("Error parsing user data:",a),this.isLoggedIn=!1,this.currentUser=null,console.log("Login status: false (parse error)")}else this.isLoggedIn=!1,this.currentUser=null,console.log("Login status: false (no valid login data)")},async fetchReviews(){try{this.loading=!0,this.error=null;const s=await u.getAllReviews();s.success?(this.allReviews=s.data,this.currentIndex=0):this.error="Failed to load reviews"}catch(s){console.error("Error fetching reviews:",s),this.error="Failed to connect to server"}finally{this.loading=!1}},updateReviews(){this.currentIndex=0},sortReviews(){switch(this.sortBy){case"date-desc":this.reviews.sort((s,e)=>new Date(s.date)-new Date(e.date));break;case"date-asc":this.reviews.sort((s,e)=>new Date(e.date)-new Date(s.date));break;case"title":this.reviews.sort((s,e)=>s.title.localeCompare(e.title));break;case"rating":this.reviews.sort((s,e)=>e.rating-s.rating);break}this.currentIndex=0,console.log("Reviews sorted by:",this.sortBy)},toggleTag(s){const e=this.selectedTags.indexOf(s);e>-1?this.selectedTags.splice(e,1):this.selectedTags.push(s)},newReviewToggleTag(s){const e=this.newReview.tags.indexOf(s);e>-1?this.newReview.tags.splice(e,1):this.newReview.tags.push(s)},clearAllTags(){this.selectedTags=[]},getTagCount(s){return this.allReviews.filter(e=>e.tags&&e.tags.includes(s)).length},getMatchingTagsCount(s){return!this.selectedTags.length||!s.tags?0:this.selectedTags.filter(e=>s.tags.includes(e)).length},getMatchingTags(s){return!this.selectedTags.length||!s.tags?[]:this.selectedTags.filter(e=>s.tags.includes(e))},async fetchTags(){try{const s=await u.getAllTags();s.success&&(this.tags=s.data)}catch(s){console.error("Error fetching tags:",s)}},nextReview(){this.currentIndex<this.reviews.length-1&&this.currentIndex++},previousReview(){this.currentIndex>0&&this.currentIndex--},selectReview(s){this.currentIndex=s},toggleReplyForm(){this.showReplyForm=!this.showReplyForm,this.showReplyForm||(this.commentContent="")},cancelReply(){this.showReplyForm=!1,this.commentContent=""},async submitComment(){if(!(!this.commentContent.trim()||!this.isLoggedIn))try{this.submittingReply=!0;const s={userId:this.currentUser._id,content:this.commentContent.trim(),parentId:null};if((await u.createComment(this.currentReview.id,s)).success){const a=await u.getAllReviews();a.success&&(this.allReviews=a.data),this.commentContent="",this.showReplyForm=!1,alert("Comment posted successfully!")}else alert("Failed to post comment")}catch(s){console.error("Error posting comment:",s),alert("Failed to post comment")}finally{this.submittingReply=!1}},toggleCommentReply(s){this.showCommentReply!==s&&(this.showCommentReply=s,this.replyContent="")},cancelCommentReply(){this.showCommentReply=null,this.replyContent=""},async submitReply(s){if(!(!this.replyContent.trim()||!this.isLoggedIn))try{this.submittingReply=!0;const e={userId:this.currentUser._id,content:this.replyContent.trim(),parentId:s};(await u.createComment(this.currentReview.id,e)).success?(await this.fetchReviews(),this.replyContent="",this.showCommentReply=null,alert("Reply posted successfully!")):alert("Failed to post reply")}catch(e){console.error("Error posting reply:",e),alert("Failed to post reply")}finally{this.submittingReply=!1}},toggleReviewReply(s){this.showReviewReply===s?(this.showReviewReply=null,this.reviewReplyContent=""):(this.showReviewReply=s,this.reviewReplyContent="")},cancelReviewReply(){this.showReviewReply=null,this.reviewReplyContent=""},async submitReviewReply(s){if(!(!this.reviewReplyContent.trim()||!this.isLoggedIn))try{this.submittingReply=!0;const e={userId:this.currentUser._id,content:this.reviewReplyContent.trim(),parentId:null};(await u.createComment(s,e)).success?(await this.fetchReviews(),this.reviewReplyContent="",this.showReviewReply=null,alert("Reply posted successfully!")):alert("Failed to post reply")}catch(e){console.error("Error posting reply:",e),alert("Failed to post reply")}finally{this.submittingReply=!1}},toggleCommentReplyInList(s){this.showCommentReplyInList===s?(this.showCommentReplyInList=null,this.commentReplyContent=""):(this.showCommentReplyInList=s,this.commentReplyContent="")},cancelCommentReplyInList(){this.showCommentReplyInList=null,this.commentReplyContent=""},async submitCommentReplyInList(s,e){if(!(!this.commentReplyContent.trim()||!this.isLoggedIn))try{this.submittingReply=!0;const a={userId:this.currentUser._id,content:this.commentReplyContent.trim(),parentId:e};(await u.createComment(s,a)).success?(await this.fetchReviews(),this.commentReplyContent="",this.showCommentReplyInList=null,alert("Reply posted successfully!")):alert("Failed to post reply")}catch(a){console.error("Error posting reply:",a),alert("Failed to post reply")}finally{this.submittingReply=!1}},handleStorageChange(s){(s.key==="isLoggedIn"||s.key==="currentUser")&&this.checkLoginStatus()},getLocalStorageItem(s){try{return localStorage.getItem(s)||"null"}catch{return"error"}},toggleReviewForm(){this.showReviewForm=!this.showReviewForm,this.showReviewForm||this.resetReviewForm()},cancelReviewForm(){this.showReviewForm=!1,this.resetReviewForm()},resetReviewForm(){this.newReview={subject:"",rate:0,content:"",tagsInput:"",tags:[]}},setRating(s){this.newReview.rate=s},hoverRating(s){for(let e=1;e<=5;e++){const a=document.querySelector(`.star-${e}`);a&&a.classList.toggle("hover",e<=s)}},async submitReview(){if(!(!this.isValidReview||!this.isLoggedIn))try{this.submittingReview=!0;let s=this.newReview.tagsInput.split(",").map(w=>w.trim()).filter(w=>w.length>0);s=s.concat(this.newReview.tags),s=Array.from(new Set(s));const e={userId:this.currentUser._id,subject:this.newReview.subject.trim(),rate:this.newReview.rate,content:this.newReview.content.trim(),tags:s};(await u.createReview(e)).success?(await this.fetchReviews(),await this.fetchTags(),this.resetReviewForm(),this.showReviewForm=!1,alert("Review posted successfully!")):alert("Failed to post review")}catch(s){console.error("Error posting review:",s),alert("Failed to post review")}finally{this.submittingReview=!1}}},mounted(){this.checkLoginStatus(),window.addEventListener("storage",this.handleStorageChange),this.fetchReviews(),this.fetchTags(),document.addEventListener("keydown",s=>{s.key==="ArrowLeft"?this.previousReview():s.key==="ArrowRight"&&this.nextReview()})},beforeUnmount(){window.removeEventListener("storage",this.handleStorageChange)}},b={key:0,class:"backdrop"},L={key:1,class:"backdrop-blur"},k={key:2,class:"add-review-form"},_={class:"form-group"},x=["disabled"],I={class:"form-group"},F={class:"rating-input"},T=["onClick","onHover"],M={class:"form-group"},S=["disabled"],U={class:"form-group"},B={class:"tags-container"},D=["onClick"],V={class:"tag-text"},Z=["disabled"],E={class:"form-buttons"},j=["disabled"],A={class:"reviews-container"},N={key:0,class:"loading-container"},H={key:1,class:"error-container"},O={class:"error-text"},W={key:2,class:"main-layout"},q={class:"main-content"},z={class:"tags-display"},J={class:"main-title"},G={class:"rating-section"},K={class:"stars"},P={class:"review-content"},Q={class:"author-section"},X={class:"author-info"},Y={class:"author-name"},$={class:"review-date"},ee=["disabled"],te=["disabled"],se={class:"comments-sidebar"},ie={key:0,class:"comments-container"},ne={class:"comment-header"},oe={class:"comment-name"},re={class:"comment-text"},le={key:0,class:"replies-section"},ae={class:"reply-header"},ce={class:"reply-author"},de={class:"reply-content"},he={key:1,class:"comment-actions"},we=["onClick"],ue={key:2,class:"reply-form small"},ge={class:"textarea-container"},ve=["disabled"],me=["onClick","disabled"],pe={key:1,class:"reply-form"},Re={class:"textarea-container"},ye=["disabled"],Ce=["disabled"],fe={key:1,class:"no-comments"},be={key:2,class:"login-prompt"},Le={class:"bottom-tags"},ke={class:"tags-container"},_e=["onClick"],xe={class:"tag-text"},Ie={class:"sort-info"},Fe={class:"results-info"},Te={class:"total-count"},Me={class:"sort-controls"},Se={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},Ue={key:1},Be={key:3,class:"empty-container"};function De(s,e,a,w,n,o){return l(),r(g,null,[n.showReviewForm&&n.isLoggedIn?(l(),r("div",b)):c("",!0),n.showReviewForm&&n.isLoggedIn?(l(),r("div",L)):c("",!0),n.showReviewForm&&n.isLoggedIn?(l(),r("div",k,[e[24]||(e[24]=t("h4",null,"Add New Review",-1)),t("div",_,[e[18]||(e[18]=t("label",null,"Subject:",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n.newReview.subject=i),type:"text",placeholder:"Enter review subject...",class:"review-input",disabled:n.submittingReview},null,8,x),[[p,n.newReview.subject]])]),t("div",I,[e[19]||(e[19]=t("label",null,"Rating:",-1)),t("div",F,[(l(),r(g,null,v(5,i=>t("span",{key:i,class:R(["star-input",{active:i<=n.newReview.rate}]),onClick:d=>o.setRating(i),onHover:d=>o.hoverRating=i},"★",42,T)),64))])]),t("div",M,[e[20]||(e[20]=t("label",null,"Content:",-1)),m(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=i=>n.newReview.content=i),placeholder:"Write your review...",class:"review-textarea",disabled:n.submittingReview},null,8,S),[[p,n.newReview.content]])]),t("div",U,[e[21]||(e[21]=t("label",null,"Tags (comma separated):",-1)),t("div",B,[(l(!0),r(g,null,v(n.tags,i=>(l(),r("div",{key:i,class:R(["tag-selector",{active:n.newReview.tags.includes(i)}]),onClick:d=>o.newReviewToggleTag(i)},[t("span",V,"#"+h(i),1)],10,D))),128))]),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>n.newReview.tagsInput=i),type:"text",placeholder:"e.g. 電影, 科幻, 哲學",class:"review-input",disabled:n.submittingReview},null,8,Z),[[p,n.newReview.tagsInput]])]),t("div",E,[t("button",{onClick:e[3]||(e[3]=(...i)=>o.cancelReviewForm&&o.cancelReviewForm(...i)),class:"cancel-btn","aria-label":"Cancel"},e[22]||(e[22]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 10.8181 3.23279 9.64778 3.68508 8.55585C4.13738 7.46392 4.80031 6.47177 5.63604 5.63604C6.47177 4.80031 7.46392 4.13738 8.55585 3.68508C9.64778 3.23279 10.8181 3 12 3C13.1819 3 14.3522 3.23279 15.4442 3.68508C16.5361 4.13738 17.5282 4.80031 18.364 5.63604C19.1997 6.47177 19.8626 7.46392 20.3149 8.55585C20.7672 9.64778 21 10.8181 21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4441 20.3149C14.3522 20.7672 13.1819 21 12 21L12 21Z",stroke:"white","stroke-linecap":"round"}),t("path",{d:"M9 9L15 15",stroke:"white","stroke-linecap":"round"}),t("path",{d:"M15 9L9 15",stroke:"white","stroke-linecap":"round"})],-1)])),t("button",{onClick:e[4]||(e[4]=(...i)=>o.submitReview&&o.submitReview(...i)),disabled:!o.isValidReview||n.submittingReview,class:"submit-btn","aria-label":"Submit"},e[23]||(e[23]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M6.99811 10.2467L7.43298 11.0077C7.70983 11.4922 7.84825 11.7344 7.84825 12C7.84825 12.2656 7.70983 12.5078 7.43299 12.9923L7.43298 12.9923L6.99811 13.7533C5.75981 15.9203 5.14066 17.0039 5.62348 17.5412C6.1063 18.0785 7.24961 17.5783 9.53623 16.5779L15.8119 13.8323C17.6074 13.0468 18.5051 12.654 18.5051 12C18.5051 11.346 17.6074 10.9532 15.8119 10.1677L9.53624 7.4221C7.24962 6.42171 6.1063 5.92151 5.62348 6.45883C5.14066 6.99615 5.75981 8.07966 6.99811 10.2467Z",stroke:"white"})],-1)]),8,j)])])):c("",!0),t("div",A,[n.loading?(l(),r("div",N,e[25]||(e[25]=[t("div",{class:"loading-text"},"Loading reviews...",-1)]))):n.error?(l(),r("div",H,[t("div",O,h(n.error),1),t("button",{onClick:e[5]||(e[5]=(...i)=>o.fetchReviews&&o.fetchReviews(...i)),class:"retry-btn"},"Retry")])):n.reviews.length>0?(l(),r("div",W,[t("div",q,[t("div",z,[(l(!0),r(g,null,v(o.currentReview.tags,i=>(l(),r("span",{key:i,class:R(["tag-item",{active:n.selectedTags.includes(i)}])}," #"+h(i),3))),128))]),t("h1",J,h(o.currentReview.title||"Title"),1),t("div",G,[t("div",K,[(l(),r(g,null,v(5,i=>t("span",{key:i,class:R(["star",{filled:i<=o.currentReview.rating}])},"★",2)),64))])]),t("div",P,[t("p",null,h(o.currentReview.content),1)]),t("div",Q,[t("div",X,[t("span",Y,h(o.currentReview.author),1),t("span",$,h(o.currentReview.date),1)])]),t("button",{class:"nav-arrow nav-left",onClick:e[6]||(e[6]=(...i)=>o.previousReview&&o.previousReview(...i)),disabled:n.currentIndex===0}," ‹ ",8,ee),t("button",{class:"nav-arrow nav-right",onClick:e[7]||(e[7]=(...i)=>o.nextReview&&o.nextReview(...i)),disabled:n.currentIndex===n.reviews.length-1}," › ",8,te)]),t("div",se,[o.currentReview.comments&&o.currentReview.comments.length>0?(l(),r("div",ie,[(l(!0),r(g,null,v(o.currentReview.comments,i=>(l(),r("div",{key:i.id,class:"comment-item"},[t("div",ne,[t("span",oe,h(i.author),1)]),t("div",re,h(i.content),1),i.replies&&i.replies.length>0?(l(),r("div",le,[(l(!0),r(g,null,v(i.replies,d=>(l(),r("div",{key:d.id,class:"reply-item"},[t("div",ae,[t("span",ce,h(d.author),1)]),t("div",de,h(d.content),1)]))),128))])):c("",!0),n.isLoggedIn&&n.showCommentReply!==i.id?(l(),r("div",he,[t("button",{onClick:d=>o.toggleCommentReply(i.id),class:"reply-arrow"},e[26]||(e[26]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"20",viewBox:"0 0 24 20",fill:"none"},[t("path",{d:"M1.00029 12.0479L0.645204 11.6959L0.296222 12.048L0.645223 12.4L1.00029 12.0479ZM23.4045 0.999988C23.4045 0.723845 23.1806 0.499994 22.9045 0.500001C22.6284 0.500008 22.4045 0.723872 22.4045 1.00001L23.4045 0.999988ZM7.84527 5.14316L7.49018 4.79115L0.645204 11.6959L1.00029 12.0479L1.35538 12.4L8.20036 5.49517L7.84527 5.14316ZM1.00029 12.0479L0.645223 12.4L7.49057 19.3044L7.84564 18.9524L8.20071 18.6003L1.35536 11.6959L1.00029 12.0479ZM1.00029 12.0479L1.00031 12.5479L16.9048 12.5475L16.9048 12.0475L16.9048 11.5475L1.00028 11.5479L1.00029 12.0479ZM22.9046 6.04736L23.4046 6.04735L23.4045 0.999988L22.9045 1L22.4045 1.00001L22.4046 6.04738L22.9046 6.04736ZM16.9048 12.0475L16.9048 12.5475C20.4947 12.5474 23.4047 9.6372 23.4046 6.04735L22.9046 6.04736L22.4046 6.04738C22.4047 9.08494 19.9424 11.5474 16.9048 11.5475L16.9048 12.0475Z",fill:"white"})],-1)]),8,we)])):c("",!0),n.showCommentReply===i.id&&n.isLoggedIn?(l(),r("div",ue,[t("div",ge,[m(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=d=>n.replyContent=d),placeholder:"Write your reply...",class:"reply-textarea",disabled:n.submittingReply},null,8,ve),[[p,n.replyContent]]),t("button",{onClick:e[9]||(e[9]=(...d)=>o.cancelCommentReply&&o.cancelCommentReply(...d)),class:"cancel-btn","aria-label":"Cancel"},e[27]||(e[27]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 10.8181 3.23279 9.64778 3.68508 8.55585C4.13738 7.46392 4.80031 6.47177 5.63604 5.63604C6.47177 4.80031 7.46392 4.13738 8.55585 3.68508C9.64778 3.23279 10.8181 3 12 3C13.1819 3 14.3522 3.23279 15.4442 3.68508C16.5361 4.13738 17.5282 4.80031 18.364 5.63604C19.1997 6.47177 19.8626 7.46392 20.3149 8.55585C20.7672 9.64778 21 10.8181 21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4441 20.3149C14.3522 20.7672 13.1819 21 12 21L12 21Z",stroke:"white","stroke-linecap":"round"}),t("path",{d:"M9 9L15 15",stroke:"white","stroke-linecap":"round"}),t("path",{d:"M15 9L9 15",stroke:"white","stroke-linecap":"round"})],-1)])),t("button",{onClick:d=>o.submitReply(i.id),disabled:!n.replyContent.trim()||n.submittingReply,class:"submit-btn","aria-label":"Submit"},e[28]||(e[28]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M6.99811 10.2467L7.43298 11.0077C7.70983 11.4922 7.84825 11.7344 7.84825 12C7.84825 12.2656 7.70983 12.5078 7.43299 12.9923L7.43298 12.9923L6.99811 13.7533C5.75981 15.9203 5.14066 17.0039 5.62348 17.5412C6.1063 18.0785 7.24961 17.5783 9.53623 16.5779L15.8119 13.8323C17.6074 13.0468 18.5051 12.654 18.5051 12C18.5051 11.346 17.6074 10.9532 15.8119 10.1677L9.53624 7.4221C7.24962 6.42171 6.1063 5.92151 5.62348 6.45883C5.14066 6.99615 5.75981 8.07966 6.99811 10.2467Z",stroke:"white"})],-1)]),8,me)])])):c("",!0)]))),128)),n.isLoggedIn&&!n.showReplyForm?(l(),r("button",{key:0,class:"add-comment-btn",onClick:e[10]||(e[10]=(...i)=>o.toggleReplyForm&&o.toggleReplyForm(...i))},e[29]||(e[29]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"45",height:"45",viewBox:"0 0 45 45",fill:"none"},[t("path",{d:"M9.625 6.125H35.375C37.308 6.125 38.875 7.692 38.875 9.625V35.375C38.875 37.308 37.308 38.875 35.375 38.875H9.625C7.692 38.875 6.125 37.308 6.125 35.375V9.625C6.125 7.692 7.692 6.125 9.625 6.125Z",stroke:"white"}),t("path",{d:"M22.5 15L22.5 30",stroke:"white","stroke-linejoin":"round"}),t("path",{d:"M30 22.5L15 22.5",stroke:"white","stroke-linejoin":"round"})],-1)]))):c("",!0),n.showReplyForm&&n.isLoggedIn?(l(),r("div",pe,[t("div",Re,[m(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=i=>n.commentContent=i),placeholder:"Write your comment...",class:"reply-textarea",disabled:n.submittingReply},null,8,ye),[[p,n.commentContent]]),t("button",{onClick:e[12]||(e[12]=(...i)=>o.cancelReply&&o.cancelReply(...i)),class:"cancel-btn","aria-label":"Cancel"},e[30]||(e[30]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 10.8181 3.23279 9.64778 3.68508 8.55585C4.13738 7.46392 4.80031 6.47177 5.63604 5.63604C6.47177 4.80031 7.46392 4.13738 8.55585 3.68508C9.64778 3.23279 10.8181 3 12 3C13.1819 3 14.3522 3.23279 15.4442 3.68508C16.5361 4.13738 17.5282 4.80031 18.364 5.63604C19.1997 6.47177 19.8626 7.46392 20.3149 8.55585C20.7672 9.64778 21 10.8181 21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4441 20.3149C14.3522 20.7672 13.1819 21 12 21L12 21Z",stroke:"white","stroke-linecap":"round"}),t("path",{d:"M9 9L15 15",stroke:"white","stroke-linecap":"round"}),t("path",{d:"M15 9L9 15",stroke:"white","stroke-linecap":"round"})],-1)])),t("button",{onClick:e[13]||(e[13]=(...i)=>o.submitComment&&o.submitComment(...i)),disabled:!n.commentContent.trim()||n.submittingReply,class:"submit-btn","aria-label":"Submit"},e[31]||(e[31]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M6.99811 10.2467L7.43298 11.0077C7.70983 11.4922 7.84825 11.7344 7.84825 12C7.84825 12.2656 7.70983 12.5078 7.43299 12.9923L7.43298 12.9923L6.99811 13.7533C5.75981 15.9203 5.14066 17.0039 5.62348 17.5412C6.1063 18.0785 7.24961 17.5783 9.53623 16.5779L15.8119 13.8323C17.6074 13.0468 18.5051 12.654 18.5051 12C18.5051 11.346 17.6074 10.9532 15.8119 10.1677L9.53624 7.4221C7.24962 6.42171 6.1063 5.92151 5.62348 6.45883C5.14066 6.99615 5.75981 8.07966 6.99811 10.2467Z",stroke:"white"})],-1)]),8,Ce)])])):c("",!0)])):n.showReplyForm?c("",!0):(l(),r("div",fe,e[32]||(e[32]=[t("p",null,"No comments yet",-1)]))),n.isLoggedIn?c("",!0):(l(),r("div",be,e[33]||(e[33]=[t("p",null,"Login to add comments and reviews",-1)])))]),t("div",Le,[t("div",ke,[(l(!0),r(g,null,v(n.tags,i=>(l(),r("div",{key:i,class:R(["tag-selector",{active:n.selectedTags.includes(i)}]),onClick:d=>o.toggleTag(i)},[t("span",xe,"#"+h(i),1)],10,_e))),128))]),t("div",Ie,[t("div",Fe,[t("span",Te,h(o.filteredReviews.length)+" reviews by ",1)]),t("div",Me,[m(t("select",{"onUpdate:modelValue":e[14]||(e[14]=i=>n.sortBy=i),onChange:e[15]||(e[15]=(...i)=>o.sortReviews&&o.sortReviews(...i))},e[34]||(e[34]=[t("option",{value:"date-desc"},"Date far to near",-1),t("option",{value:"date-asc",selected:""}," Date near to far ",-1),t("option",{value:"title"},"Title",-1),t("option",{value:"rating"},"Rating",-1)]),544),[[C,n.sortBy]])]),n.selectedTags.length>0?(l(),r("button",{key:0,onClick:e[16]||(e[16]=(...i)=>o.clearAllTags&&o.clearAllTags(...i)),class:"clear-tags-btn"}," Reset ")):c("",!0),n.isLoggedIn?(l(),r("button",{key:1,class:"add-review-btn",onClick:e[17]||(e[17]=(...i)=>o.toggleReviewForm&&o.toggleReviewForm(...i))},[n.showReviewForm?c("",!0):(l(),r("svg",Se,e[35]||(e[35]=[t("path",{d:"M8 1V15",stroke:"white","stroke-width":"2","stroke-linecap":"round"},null,-1),t("path",{d:"M1 8H15",stroke:"white","stroke-width":"2","stroke-linecap":"round"},null,-1)]))),n.showReviewForm?(l(),r("span",Ue,"✕")):c("",!0)])):c("",!0)])])])):(l(),r("div",Be,e[36]||(e[36]=[t("div",{class:"empty-text"},"No reviews found",-1)])))])],64)}const je=y(f,[["render",De],["__scopeId","data-v-7bd7c8fd"]]);export{je as default};
